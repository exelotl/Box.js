(function(){var e=document;window.Box=function(a){a===void 0&&(a={});this.div=a.id===void 0?e.createElement("div"):e.getElementById(a.id);(this.style=this.div.style).overflow="hidden";this.children=[];for(var b in a)this[b]=a[b];this.prev={x:null,y:null,w:null,h:null,color:null,visible:null};this.updateStyle();if(this.rate!==null){this.style.position="relative";var c=this;(function f(){c.rate>0?setTimeout(function(){c.update();c.updateChildren();c.updateStyle();f()},c.rate):setTimeout(f,200)})()}else this.style.position="absolute"};Box.prototype={constructor:Box,init:function(){},parent:null,children:null,div:null,style:null,rate:null,x:0,y:0,w:0,h:0,color:"#000000",visible:!0,prev:null,set:{x:function(a){this.style.left=a+"px"},y:function(a){this.style.top=a+"px"},w:function(a){this.style.width=a+"px"},h:function(a){this.style.height=a+"px"},color:function(a){this.style.backgroundColor=a},visible:function(a){this.style.display=a?"block":"none"}},updateStyle:function(){for(var a in this.prev)this[a]!==this.prev[a]&&this.set[a].call(this,this.prev[a]=this[a])},updateChildren:function(){for(var a=0;a<this.children.length;a++){var b=this.children[a];b.update();b.updateChildren();b.updateStyle()}},update:function(){},add:function(a){a.parent!==null&&(a.parent.children.slice(a.parent.children.indexOf(a),1),a.parent.div.removeChild(a.div));(a.parent=this).children.push(a);this.div.appendChild(a.div);return a},remove:function(a){var b=this.children.indexOf(a);if(b!==-1)return this.div.removeChild(a.div),this.children.slice(b,1)[0];return null},overlaps:function(a){return a.x+a.w>this.x&&a.x<this.x+this.w&&a.y+a.h>this.y&&a.y<this.y+this.h}};Box.extend=function(a){function b(a){c.call(this,a);this.init()}var c=this,d;for(d in this.prototype)b.prototype[d]=this.prototype[d];for(d in a)b.prototype[d]=a[d];return b}})();